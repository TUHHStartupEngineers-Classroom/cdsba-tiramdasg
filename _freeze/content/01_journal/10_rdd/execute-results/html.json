{
  "hash": "f7d18e30c64dc430e26eb0c2e5598bb4",
  "result": {
    "markdown": "---\ntitle: \"Regression Discontinuity\"\nauthor: \"Geethika Tiramdas\"\nsubtitle: \"Assignment solutions\"\ntoc: true\nnumber-sections: false\n---\n\n\n## Part 1\n\nloading the necessary libraries and data from `coupon.rds`.\n\n\n::: {.cell hash='10_rdd_cache/html/unnamed-chunk-1_d8ec3d157a3574724b9f178a6ac5bcf3'}\n\n```{.r .cell-code}\nlibrary(dplyr)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> \n#> Attaching package: 'dplyr'\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n#> The following objects are masked from 'package:stats':\n#> \n#>     filter, lag\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n#> The following objects are masked from 'package:base':\n#> \n#>     intersect, setdiff, setequal, union\n```\n:::\n\n```{.r .cell-code}\ndf <- readRDS(\"../../Causal_Data_Science_Data/coupon.rds\")\nc0 <- 60\n\n# Part1\nbw_half <- c0 + c(-2, 2)\n```\n:::\n\n\nInterval [58,62]\n\n\n::: {.cell hash='10_rdd_cache/html/unnamed-chunk-2_6e66d58ec3f7c3c98361948b4727945a'}\n\n```{.r .cell-code}\ndf_bw_below <- df %>% filter(days_since_last >= bw_half[1] & days_since_last < c0)\ndf_bw_above <- df %>% filter(days_since_last >= c0 & days_since_last <= bw_half[2])\ndf_bw_half <- bind_rows(df_bw_above, df_bw_below)\n```\n:::\n\n\nDimension of data in [58, 62] interval\n\n\n::: {.cell hash='10_rdd_cache/html/unnamed-chunk-3_daeacd299642825e84332e56b9a7859e'}\n\n```{.r .cell-code}\ndim(df_bw_half)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> [1] 138   4\n```\n:::\n\n```{.r .cell-code}\nmodel_bw_below <- lm(purchase_after ~ days_since_last, df_bw_below)\nmodel_bw_above <- lm(purchase_after ~ days_since_last, df_bw_above)\n\ny0 <- predict(model_bw_below, tibble(days_since_last = c0))\ny1 <- predict(model_bw_above, tibble(days_since_last = c0))\n\nlate <- y1 - y0\nsprintf(\"LATE for half the bandwidth [58,62]: %.2f\", late)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> [1] \"LATE for half the bandwidth [58,62]: 7.34\"\n```\n:::\n:::\n\n\n## Part 2\n\n\n::: {.cell hash='10_rdd_cache/html/unnamed-chunk-4_75cca1ca5fdea36edc401e32c0fb5b12'}\n\n```{.r .cell-code}\nbw_double <- c0 + c(-10, 10)\n```\n:::\n\n\nInterval [50,70]\n\n\n::: {.cell hash='10_rdd_cache/html/unnamed-chunk-5_cd673f4c2b91a88f0278bbad67e9f56a'}\n\n```{.r .cell-code}\ndf_bw_below <- df %>% filter(days_since_last >= bw_double[1] & days_since_last < c0)\ndf_bw_above <- df %>% filter(days_since_last >= c0 & days_since_last <= bw_double[2])\ndf_bw_double <- bind_rows(df_bw_above, df_bw_below)\n```\n:::\n\n\nDimension of data in [50, 70] interval\n\n\n::: {.cell hash='10_rdd_cache/html/unnamed-chunk-6_bf1036d320dff06f108934b20adaf510'}\n\n```{.r .cell-code}\ndim(df_bw_double)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> [1] 629   4\n```\n:::\n\n```{.r .cell-code}\nmodel_bw_below <- lm(purchase_after ~ days_since_last, df_bw_below)\nmodel_bw_above <- lm(purchase_after ~ days_since_last, df_bw_above)\n\ny0 <- predict(model_bw_below, tibble(days_since_last = c0))\ny1 <- predict(model_bw_above, tibble(days_since_last = c0))\n\nlate <- y1 - y0\nsprintf(\"LATE for double the bandwidth [50, 70]: %.2f\", late)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> [1] \"LATE for double the bandwidth [50, 70]: 9.51\"\n```\n:::\n:::\n\n\n## Part 3\n\nVisually check continuity at running variable. You can see that the confidence intervals doesn't overlap. If they did not overlap, there is some kind of manipulation around the cut-off so, we cannot use RDD to obtain valid results.\n\n\n::: {.cell hash='10_rdd_cache/html/unnamed-chunk-7_0163fc85905abecb184f5b48b05e4eaa'}\n\n```{.r .cell-code}\ndf <- readRDS(\"../../Causal_Data_Science_Data/shipping.rds\")\nc0 = 30\nlibrary(rddensity)\nrddd <- rddensity(df$purchase_amount, c = c0)\nrdd_plot <- rdplotdensity(rddd, df$purchase_amount, plotN = 100)\n```\n\n::: {.cell-output-display}\n![](10_rdd_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}